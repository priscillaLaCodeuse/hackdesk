{% extends 'layout.html' %}

<!-- BODY -->
{% block body %}
<div class="app dg">
  <!-- Main -->
  <main class="app-view dg">
    <!-- Menu -->
    {% include 'dashboard/partials/menu-app.html' %}

    <div class="app-container">
      <div class="df" style="justify-content: space-between">
        <h1>Clients</h1>
        <a href="/add-a-client">
          <button class="button2">
            <i class="bi bi-plus-circle"></i>Ajouter un client
          </button>
        </a>
      </div>

      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %}
      <div id="flash-messages" class="container">
        {% for category, message in messages %}
        <div class="flash {{ category }}">{{ message }}</div>
        {% endfor %}
      </div>
      {% endif %} {% endwith %}


      <div class="table-list table-clients">
        {% if clients %}
        <table>
          <thead>
            <tr>
              <th>Nom</th>
              <th>Prénom</th>
              <th>Entreprise</th>
              <th>Téléphone</th>
              <th>Email</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for client in clients|reverse %}
            <tr>
              <td>{{ client.lastname}}</td>
              <td>{{ client.firstname}}</td>
              <td>{{ client.enterprise}}</td>
              <td>{{ client.phone_number}}</td>
              <td>{{ client.email}}</td>
              <td class="actions df">
                <a href="/view-client/{{ client.id }}">
                  <button class="button-circle">
                    <i class="bi bi-eye"></i>
                  </button>
                </a>
                <a href="/edit-client/{{ client.id }}">
                  <button class="button-circle">
                    <i class="bi bi-pencil"></i>
                  </button>
                </a>
                <form method="POST" action="/delete-client/{{ client.id }}" onsubmit="return confirmDeleteClient();">
                  <button type="submit" class="button-circle">
                    <i class="bi bi-trash"></i>
                  </button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        {% else %}
        <p>Aucun client trouvé.</p>
        {% endif %}
      </div>
    </div>
  </main>
</div>
{% endblock %}